import{k as V,l as b,f as z,i as C,m as j,Q as _,n as A,o as B}from"./FooterComponent-CRpr9cR5.js";import{Q as E}from"./QRating-Cf5qxSFT.js";import{O as M,r as g,k as N,C as $,v as a,A as c,x as o,y as n,L as m,M as v,P as R,u as i,B as O,D as u,T as k,G as F}from"./index-BMfJQZfm.js";const U=["src"],P={class:"text-grey-6 text-caption row oswald"},G={class:"q-mr-xs text-overline"},H={class:"on-right"},K={key:0},X={key:1,class:"on-right"},J={class:"row justify-between"},W={class:"ys row items-start text-body1"},Y={class:"oswald text-h5"},Z={class:"row justify-end items-center q-pr-sm"},tt={key:0,class:"text-warning animated zoomIn"},et={key:0,class:"q-py-none on-left"},st={key:0,class:"row justify-end"},at={key:0},ot={key:0,class:"text-positive animated zoomIn"},nt={key:0,class:"text-negative animated zoomIn slow"},it={key:0,class:"text-amber-8"},dt={key:0},rt={key:1},lt={key:2},ct={key:3,class:"row items-center justify-evenly"},pt={__name:"ProductListing",props:{product:{type:Object,required:!0}},setup(s){const Q=M(),r=V(),p=s,d=g(1),w=p.product.rating,h=g(!1),x=g(null),q=g(null),I=g(null),L=l=>{d.value>1&&(d.value=parseInt(d.value)-1)},T=l=>{d.value<25&&(d.value=parseInt(d.value)+1)},y=()=>{const l=p.product.category_name.toLowerCase().split(" ").join("-");Q.push(`/${l}/${p.product.id}`)},S=async l=>{h.value=!0;const e=d.value+(r.items.find(t=>t.product_id===p.product.id)?r.items.find(t=>t.product_id===p.product.id).quantity:0);try{const t=await F.get(`product/cart/${p.product.id}?quantity=${e}`);t.data.can_add===!0?(r.addItem(p.product.id,d.value),x.value=!0,q.value=!1,d.value=1):(q.value=!0,I.value=t.data.quantity)}catch(t){console.error(t)}setTimeout(()=>{h.value=!1},1e3),setTimeout(()=>{x.value=null},3e3)},D=l=>`${new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})}`;return N(()=>{const l=document.querySelectorAll(".fade-left"),e=new IntersectionObserver(t=>{t.forEach(f=>{f.target.classList.toggle("animated",f.isIntersecting),f.target.classList.toggle("fadeInLeft",f.isIntersecting),f.target.classList.toggle("slow",f.isIntersecting)})});l.forEach(t=>{e.observe(t)})}),(l,e)=>(a(),$(B,{class:"fade-left q-mx-auto q-my-md",style:{"max-width":"70%"},bordered:""},{default:c(()=>[o(b,{class:"q-mx-xl q-my-md",horizontal:""},{default:c(()=>[n("img",{class:"cursor-pointer",src:`static/products/${s.product.image}`,style:{width:"200px",height:"200px"},onClick:e[0]||(e[0]=t=>y())},null,8,U),o(z,{class:"bg-deep-purple-14",style:{"padding-right":"1px","padding-left":"1px"},vertical:""}),o(b,{class:"q-pb-none",style:{width:"100%"}},{default:c(()=>[n("div",{class:"ys text-h6 cursor-pointer",style:{width:"fit-content"},onClick:e[1]||(e[1]=t=>y())},m(s.product.name),1),n("div",P,[n("span",null,m(D(s.product.created_at)),1),o(z,{vertical:"",class:"on-right on-left"}),n("span",{class:"on-left cursor-pointer",style:{width:"fit-content"},onClick:e[2]||(e[2]=t=>y())}," by Â  "+m(s.product.brand),1)]),n("div",{class:"row items-center oswald cursor-pointer",style:{width:"fit-content"},onClick:e[4]||(e[4]=t=>y())},[n("div",G,m(v(w).toFixed(1)),1),o(E,{modelValue:v(w),"onUpdate:modelValue":e[3]||(e[3]=t=>R(w)?w.value=t:null),max:"5",size:"sm",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue"]),n("div",H,[s.product.reviews.length>0?(a(),i("div",K,m(s.product.reviews.length===1?s.product.reviews.length+" review":s.product.reviews.length+" reviews"),1)):(a(),i("div",X,"No reviews"))])]),n("div",J,[n("div",{class:"q-mt-md cursor-pointer",onClick:e[5]||(e[5]=t=>y())},[n("span",W,[O(" $"),n("span",Y,m(s.product.price.toFixed(2)),1)])]),n("div",Z,[o(C,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[6]||(e[6]=t=>L())}),o(j,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"2.5rem"},modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=t=>d.value=t),modelModifiers:{trim:!0},mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),o(C,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[8]||(e[8]=t=>T())})])]),o(b,{class:"oswald row justify-end items-center q-px-none q-pb-none"},{default:c(()=>[o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:c(()=>[q.value?(a(),i("div",tt," Cannot add to cart. Only "+m(I.value)+" left in stock! ",1)):u("",!0)]),_:1}),v(r).items.find(t=>t.product_id===s.product.id)?(a(),i("div",et,[v(r).items.find(t=>t.product_id===s.product.id)?(a(),i("div",st,[v(r).items.find(t=>t.product_id===s.product.id).quantity+d.value<=25?(a(),i("div",at,[o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:c(()=>[x.value?(a(),i("div",ot,m(s.product.name)+" successfully added to cart! ",1)):u("",!0)]),_:1}),o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:c(()=>[x.value==!1?(a(),i("div",nt," Something went wrong adding item to cart! ")):u("",!0)]),_:1})])):u("",!0),o(k,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:c(()=>[v(r).items.find(t=>t.product_id===s.product.id).quantity===25?(a(),i("div",it," Quantity exceeds limit ")):u("",!0)]),_:1})])):u("",!0)])):u("",!0),o(_,{color:s.product.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:s.product.quantity===0||v(r).items.some(t=>t.product_id===s.product.id&&t.quantity===25),onClick:e[9]||(e[9]=t=>S())},{default:c(()=>[s.product.quantity===0?(a(),i("div",dt,"OUT OF STOCK")):v(r).items.some(t=>t.product_id===s.product.id&&t.quantity===25)?(a(),i("div",rt," MAX LIMIT REACHED ")):s.product.quantity!==0&&!h.value?(a(),i("div",lt,[O(" ADD TO CART "),s.product.quantity!==0?(a(),$(C,{key:0,name:"mdi-cart-outline on-right"})):u("",!0)])):h.value?(a(),i("div",ct,[o(A,{color:"white",size:"1em",thickness:8})])):u("",!0)]),_:1},8,["color","disable"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{pt as _};
