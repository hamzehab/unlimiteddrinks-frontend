import{n as J,_ as R,E as Y,k,Q as f,r as Q,j as G,o as q,J as H,p as K,i as B,q as X,L as Z}from"./FooterComponent.a78091ec.js";import{Q as ee}from"./QSpinnerTail.566fafe9.js";import{Q as te}from"./QTooltip.64bb7e07.js";import{r as u,j as se,q as ae,t as n,u as d,v as t,y as o,x as e,a7 as z,L as S,ac as D,E as x,F as E,C as L,J as le,A as oe,z as m,a6 as v,T as I,D as ne}from"./index.4e430b80.js";const ie=e("div",{class:"ys text-h6"},"Are you sure you want remove this item?",-1),re={class:"q-ma-xl main"},de=e("div",{class:"row justify-between items-center q-mt-xl q-mb-lg"},null,-1),ue=e("div",{class:"ys on-right text-h5"},"Shopping Cart",-1),ce={key:0,class:"q-py-xl q-my-xl text-center text-h6 text-grey-6"},ve=e("div",{class:"q-py-xl"},"Your Shopping Cart is Empty",-1),pe={key:1,class:"row justify-between"},me={key:0,class:"flex flex-center"},_e={class:"flex items-center"},he=["src","alt"],ye={class:"q-ml-lg"},fe=["onClick"],xe={class:"ellipsis"},we={class:"text-caption"},be={class:"row items-center ys nowrap"},ke={class:"text-subtitle1"},qe=e("span",{class:"text-bold"},"$",-1),ge={class:"q-mx-xl"},Ce={class:"row items-center"},$e={class:"text-center"},Qe={key:0,class:"text-positive"},ze={key:0,class:"text-positive"},Se={key:0,class:"text-warning"},Ie=["onClick"],Ve={class:"q-ml-xl"},je={key:0,class:"ys text-h5"},Fe={class:"row justify-between"},Te=e("div",null,[e("div",{class:"text-body1"},"Subtotal:"),e("div",{class:"text-caption"},"Before Taxes and Fees")],-1),Pe={class:"text-subtitle1"},Be=e("span",{class:"text-bold"},"$",-1),De={class:"row justify-between"},Ee=e("div",{class:"text-body1"},"Taxes and Fees:",-1),Le={class:"text-subtitle1"},Ue=e("span",{class:"text-bold"},"$",-1),Ae={class:"row justify-between text-h6"},Ne=e("div",null,"Total:",-1),Oe=e("span",{class:"text-bold"},"$",-1),Me={key:0},We={key:1,class:"row items-center justify-evenly"},Je={key:0,class:"text-deep-purple-14 cursor-pointer row items-center q-my-lg q-mx-xl",style:{width:"fit-content"}},Xe={__name:"ViewCartPage",setup(Re){const _=J(),V=u(!1),p=u([]),w=u(!1),j=u(null),h=u(0),g=u(0),i=u([]),U=u([]),C=u([]),b=u([]),A=s=>{i.value[s]>1?i.value[s]=parseInt(i.value[s])-1:w.value=!0},N=s=>{i.value[s]<25&&(i.value[s]=parseInt(i.value[s])+1)},O=async s=>{const l=i.value[s];if(l!==p.value[s].quantity)try{const a=await L.get(`product/cart/${p.value[s].id}?quantity=${l}`);a.data.can_add===!0?(b.value[s]=null,_.update(s,l),C.value[s]=!0,h.value=p.value.reduce((r,c,P)=>{const W=P===s?l:i.value[P];return r+c.price*W},0),setTimeout(()=>{C.value[s]=!1},1e3)):(b.value[s]=`Only ${a.data.quantity} left in stock`,i.value[s]=a.data.quantity)}catch(a){console.error(a)}},M=s=>{_.removeItem(s),w.value=!1,F()},F=async()=>{p.value=[],i.value=[],h.value=0,g.value=0;for(const s of _.items)try{const l=await L.get(`/product/${s.product_id}`);p.value.push(l.data),i.value.push(s.quantity),b.value.push(null),h.value+=l.data.price*s.quantity}catch(l){console.error(l)}g.value=h.value*.06625},y=u(window.innerWidth),T=()=>{y.value=window.innerWidth},$=u(!1);return se(async()=>{window.addEventListener("resize",T),$.value=!0,await F(),$.value=!1}),ae(()=>{window.removeEventListener("resize",T)}),(s,l)=>(n(),d(E,null,[t(R),t(Y,{modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=a=>w.value=a)},{default:o(()=>[t(Q,{class:"q-pa-md q-px-sm"},{default:o(()=>[t(q,{class:"q-pb-lg"},{default:o(()=>[ie]),_:1}),t(H,{class:"float-right"},{default:o(()=>[le(t(f,{label:"Cancel",color:"deep-purple-14"},null,512),[[Z]]),t(f,{flat:"",label:"Delete",color:"negative",onClick:l[0]||(l[0]=a=>M(j.value))})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e("div",re,[de,e("div",{class:z(["flex items-center",y.value>1305?"":"q-mx-xl q-mb-xl"])},[t(k,{name:"work_outline",size:"40px"}),ue],2),S(_).totalQuantity===0?(n(),d("div",ce,[ve,t(f,{class:"text-subtitle1 text-bold q-py-sm",label:"Continue Shopping",color:"deep-purple-14",style:{width:"100%","max-width":"300px"},push:"",onClick:l[2]||(l[2]=a=>s.$router.push("/"))})])):(n(),d("div",pe,[t(Q,{class:z(["q-py-lg",y.value>1305?"":"q-mx-xl q-mb-xl"]),bordered:"",style:D([{height:"fit-content"},y.value>1305?"width: 100%; max-width: 70%;":"width:100%;"])},{default:o(()=>[$.value?(n(),d("div",me,[t(ee,{color:"deep-purple-14 q-pb-xl",size:"10rem"})])):(n(!0),d(E,{key:1},oe(p.value,(a,r)=>(n(),d("div",{key:(a.id,r)},[t(q,{class:"q-mx-auto row justify-between items-center oswald",style:{width:"95%"}},{default:o(()=>[e("div",_e,[e("img",{class:"rounded-borders q-mr-lg",src:`static/products/${a.image}`,alt:a.name+"Image",style:{width:"150px",height:"150px"}},null,8,he),e("div",ye,[e("div",{class:"text-h6 cursor-pointer text-deep-purple-14",onClick:c=>s.$router.push(`/${a.category_name.split(" ").join("-")}/${a.id}`),style:{width:"160px"}},[e("div",xe,[m(v(a.name)+" ",1),t(te,{class:"bg-white text-dark",style:{width:"fit-content",border:"1px solid black"},delay:200,offset:[0,20]},{default:o(()=>[m(v(a.name),1)]),_:2},1024)])],8,fe),e("div",we,v(a.category_name.split(" ").map(c=>c[0].toUpperCase()+c.substring(1)).join(" ")),1)])]),e("div",be,[e("div",ke,[qe,m(" "+v(a.price.toFixed(2)),1)]),e("div",ge,[e("div",Ce,[t(k,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:c=>A(r)},null,8,["onClick"]),t(K,{class:"rounded-borders","input-class":"ys text-bold text-subtitle1 text-center",style:{width:"2.5rem"},modelValue:i.value[r],"onUpdate:modelValue":c=>i.value[r]=c,mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue","onUpdate:modelValue"]),t(k,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:c=>N(r)},null,8,["onClick"])]),e("div",$e,[t(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[C.value[r]?(n(),d("div",Qe," Quantity updated ")):x("",!0)]),_:2},1024),t(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[U.value[r]?(n(),d("div",ze," Successfully removed from cart ")):x("",!0)]),_:2},1024),t(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[b.value[r]?(n(),d("div",Se,v(b.value[r]),1)):x("",!0)]),_:2},1024)])]),e("div",{class:"underline text-center cursor-pointer text-deep-purple-14",onClick:c=>O(r)}," Update ",8,Ie),e("div",Ve,[t(f,{icon:"delete_outline",color:"negative",onClick:c=>(w.value=!0,j.value=a.id)},null,8,["onClick"])])])]),_:2},1024),r!==p.value.length-1?(n(),ne(B,{key:0,class:"q-mx-auto",style:{width:"90%"},inset:""})):x("",!0)]))),128))]),_:1},8,["class","style"]),e("div",{class:z(y.value>1305?"":"q-mx-xl"),style:D(y.value>1305?"width: 100%; max-width: 25%;":"width:100%;")},[S(_).totalQuantity>0?(n(),d("div",je," Payment Summary ")):x("",!0),t(Q,{class:"oswald",bordered:""},{default:o(()=>[t(q,{class:"q-mx-sm"},{default:o(()=>[e("div",Fe,[Te,e("div",Pe,[Be,m(" "+v(h.value.toFixed(2)),1)])])]),_:1}),t(q,{class:"q-mx-sm"},{default:o(()=>[e("div",De,[Ee,e("div",Le,[Ue,m(" "+v(g.value.toFixed(2)),1)])])]),_:1}),t(B,{inset:""}),t(q,{class:"q-mx-sm"},{default:o(()=>[e("div",Ae,[Ne,e("div",null,[Oe,m(" "+v((h.value*1.06625).toFixed(2)),1)])])]),_:1})]),_:1}),t(f,{class:"q-mt-xl rounded-borders q-mb-md full-width",label:"Continue Shopping",color:"dark",push:"",onClick:l[3]||(l[3]=a=>s.$router.push("/"))}),t(f,{class:"rounded-borders full-width",color:"deep-purple-14",push:"",onClick:l[4]||(l[4]=a=>(s.$router.push("/checkout"),V.value=!0))},{default:o(()=>[V.value?(n(),d("div",We,[t(X,{color:"white",size:"1em",thickness:8})])):(n(),d("div",Me,[t(k,{name:"lock_outline",class:"on-left"}),m(" Proceed to Checkout ")]))]),_:1})],6)]))]),S(_).totalQuantity!==0?(n(),d("div",Je,[t(k,{name:"arrow_back",size:"20px"}),e("div",{class:"on-right underline oswald text-body1 q-pa-md",onClick:l[5]||(l[5]=a=>s.$router.push("/"))}," Return to Previous Page ")])):x("",!0),t(G)],64))}};export{Xe as default};
