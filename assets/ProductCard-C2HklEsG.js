import{k as T,f as L,l as c,i as b,m as S,Q as V,n as j,o as A}from"./FooterComponent-CRpr9cR5.js";import{O as B,r as f,k as M,C,v as o,A as i,y as p,x as s,D as u,L as g,T as I,M as v,u as r,B as _,G as D}from"./index-BMfJQZfm.js";const E=["src"],N=p("div",{class:"text-caption row justify-end"},"Max limit 25",-1),F={class:"text-warning animated zoomIn"},R={key:0,class:"row justify-end"},U={key:0},G={key:0,class:"text-positive animated zoomIn"},H={key:0,class:"text-negative animated zoomIn slow"},K={key:0,class:"text-amber-8"},P={key:0},X={key:1},J={key:2},W={key:3},tt={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(a){const d=T(),z=B(),m=a,n=f(1),k=f(!1),x=f(null),w=f(null),h=f(null),q=()=>{const y=m.product.category_name.toLowerCase().split(" ").join("-");z.push(`/${y}/${m.product.id}`)},$=async y=>{k.value=!0;const e=n.value+(d.items.find(t=>t.product_id===m.product.id)?d.items.find(t=>t.product_id===m.product.id).quantity:0);try{const t=await D.get(`product/cart/${m.product.id}?quantity=${e}`);t.data.can_add===!0?(d.addItem(m.product.id,n.value),x.value=!0,w.value=!1,n.value=1):(w.value=!0,h.value=t.data.quantity)}catch(t){console.error(t)}setTimeout(()=>{k.value=!1},1e3),setTimeout(()=>{x.value=null},3e3)},O=()=>{n.value>1&&(n.value=parseInt(n.value)-1)},Q=()=>{n.value<25&&(n.value=parseInt(n.value)+1)};return M(()=>{const y=document.querySelectorAll(".slide"),e=new IntersectionObserver(t=>{t.forEach(l=>{l.target.classList.toggle("animated",l.isIntersecting),l.target.classList.toggle("slideInLeft",l.isIntersecting),l.target.classList.toggle("slower",l.isIntersecting),l.isIntersecting&&e.unobserve(l.target)})});y.forEach(t=>{e.observe(t)})}),(y,e)=>(o(),C(A,{class:"slide q-my-lg oswald",style:{width:"100%","max-width":"400px"}},{default:i(()=>[p("img",{class:"cursor-pointer",src:`static/products/${a.product.image}`,onClick:e[0]||(e[0]=t=>q())},null,8,E),s(L,{class:"q-mt-md bg-deep-purple-14",style:{"padding-top":"1px","padding-bottom":"1px"}}),s(c,{class:"q-pb-none",onClick:e[2]||(e[2]=t=>q())},{default:i(()=>[p("span",{class:"text-h6 cursor-pointer",onClick:e[1]||(e[1]=t=>q())},g(a.product.name),1)]),_:1}),s(c,{class:"q-pb-none"},{default:i(()=>[p("div",null,g(a.product.description.slice(0,250))+"...",1)]),_:1}),s(c,{class:"q-pb-none row justify-end items-center"},{default:i(()=>[s(b,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[3]||(e[3]=t=>O())}),s(S,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"2.5rem"},modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value=t),modelModifiers:{trim:!0},mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),s(b,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[5]||(e[5]=t=>Q())})]),_:1}),s(c,{class:"q-pt-none"},{default:i(()=>[N]),_:1}),w.value?(o(),C(c,{key:0},{default:i(()=>[s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[p("div",F," Cannot add to cart. Only "+g(h.value)+" left in stock! ",1)]),_:1})]),_:1})):u("",!0),v(d).items.find(t=>t.product_id===a.product.id)?(o(),C(c,{key:1,class:"q-py-none"},{default:i(()=>[v(d).items.find(t=>t.product_id===a.product.id)?(o(),r("div",R,[v(d).items.find(t=>t.product_id===a.product.id).quantity+n.value<=25?(o(),r("div",U,[s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[x.value?(o(),r("div",G,g(a.product.name)+" successfully added to cart! ",1)):u("",!0)]),_:1}),s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[x.value==!1?(o(),r("div",H," Something went wrong adding item to cart! ")):u("",!0)]),_:1})])):u("",!0),s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[v(d).items.find(t=>t.product_id===a.product.id).quantity===25?(o(),r("div",K," Quantity exceeds limit ")):u("",!0)]),_:1})])):u("",!0)]),_:1})):u("",!0),s(c,{class:"row justify-between items-center"},{default:i(()=>[p("div",{class:"ys text-h6 cursor-pointer",onClick:e[6]||(e[6]=t=>q())}," $ "+g(a.product.price.toFixed(2)),1),s(V,{color:a.product.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:a.product.quantity===0||v(d).items.some(t=>t.product_id===a.product.id&&t.quantity===25),onClick:e[7]||(e[7]=t=>$())},{default:i(()=>[a.product.quantity===0?(o(),r("div",P,"OUT OF STOCK")):v(d).items.some(t=>t.product_id===a.product.id&&t.quantity===25)?(o(),r("div",X," MAX LIMIT REACHED ")):a.product.quantity!==0&&!k.value?(o(),r("div",J,[_(" ADD TO CART "),a.product.quantity!==0?(o(),C(b,{key:0,name:"mdi-cart-outline on-right"})):u("",!0)])):k.value?(o(),r("div",W,[s(j,{color:"white",size:"1em",thickness:8})])):u("",!0)]),_:1},8,["color","disable"])]),_:1})]),_:1}))}};export{tt as _};
