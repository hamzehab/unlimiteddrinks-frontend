import{Q as ne}from"./QSpinnerTail-DLaEsyCh.js";import{p as ie,a as ue,b as de,q as ce,e as ve,k as me,_ as pe,i as R,f as E,m as ye,n as _e,Q as K,l as I,o as W,j as fe}from"./FooterComponent-CRpr9cR5.js";import{Q as N}from"./QRating-Cf5qxSFT.js";import{j as he,g as Z,h as p,i as U,Q as ge,I as xe,O as we,r as v,w as qe,J as ke,k as be,u as i,v as n,x as r,y as l,D as d,M as b,L as u,B as $,A as m,C as T,T as j,F as A,E as M,G as B}from"./index-BMfJQZfm.js";import{Q as $e}from"./QPagination-DnC8vnBz.js";import{_ as Ce}from"./ProductCard-C2HklEsG.js";const Se={xs:2,sm:4,md:6,lg:10,xl:14};function Y(o,x,_){return{transform:x===!0?`translateX(${_.lang.rtl===!0?"-":""}100%) scale3d(${-o},1,1)`:`scale3d(${o},1,1)`}}const ze=he({name:"QLinearProgress",props:{...ue,...ie,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(o,{slots:x}){const{proxy:_}=Z(),D=de(o,_.$q),y=ce(o,Se),C=p(()=>o.indeterminate===!0||o.query===!0),S=p(()=>o.reverse!==o.query),h=p(()=>({...y.value!==null?y.value:{},"--q-linear-progress-speed":`${o.animationSpeed}ms`})),c=p(()=>"q-linear-progress"+(o.color!==void 0?` text-${o.color}`:"")+(o.reverse===!0||o.query===!0?" q-linear-progress--reverse":"")+(o.rounded===!0?" rounded-borders":"")),q=p(()=>Y(o.buffer!==void 0?o.buffer:1,S.value,_.$q)),w=p(()=>`with${o.instantFeedback===!0?"out":""}-transition`),k=p(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${w.value} q-linear-progress__track--${D.value===!0?"dark":"light"}`+(o.trackColor!==void 0?` bg-${o.trackColor}`:"")),z=p(()=>Y(C.value===!0?1:o.value,S.value,_.$q)),F=p(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${w.value} q-linear-progress__model--${C.value===!0?"in":""}determinate`),L=p(()=>({width:`${o.value*100}%`})),a=p(()=>`q-linear-progress__stripe absolute-${o.reverse===!0?"right":"left"} q-linear-progress__stripe--${w.value}`);return()=>{const g=[U("div",{class:k.value,style:q.value}),U("div",{class:F.value,style:z.value})];return o.stripe===!0&&C.value===!1&&g.push(U("div",{class:a.value,style:L.value})),U("div",{class:c.value,style:h.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":o.indeterminate===!0?void 0:o.value},ve(x.default,g))}}}),Qe={key:0,class:"main flex flex-center"},Ve={key:1},Re={class:"q-mx-xl"},Ie={class:"fade q-ma-xl cursor-pointer row items-center text-deep-purple-14"},Te={key:0,class:"row justify-evenly",style:{width:"100%"}},Be=["src"],De={key:0,class:"fade oswald q-mt-xl",style:{width:"100%","max-width":"800px"}},Fe={class:"text-caption fade"},Le={class:"text-h4 ys fade"},Oe={class:"text-caption"},Pe={class:"q-mr-xs"},Ue={class:"on-right text-caption"},je={class:"text-h3 ys q-mb-xl"},Ae={class:"text-body1 q-mb-xl"},Ee={class:"row justify-end items-center q-mr-md q-mb-md no-wrap"},Ne={key:0},Me={key:1},Xe={key:2},Ge={key:3},He={class:"oswald row justify-end items-center q-px-none q-pb-none"},Je={key:0,class:"text-warning animated zoomIn"},Ke={key:0,class:"q-py-none on-left"},We={class:"row justify-end"},Ye={key:0},Ze={key:0,class:"text-positive animated zoomIn"},et={key:0,class:"text-negative animated zoomIn slow"},tt={key:0,class:"text-amber-8"},at={class:"row justify-around"},st=l("div",{class:"ys text-h5"},"Customer Reviews",-1),lt={class:"row items-center q-py-md"},ot={class:"on-right text-h6"},rt={key:0,class:"q-ml-sm q-mb-md"},nt=["onClick"],it={class:"on-left text-body2 cursor-pointer text-bold"},ut={class:"on-right text-body2 cursor-pointer text-bold"},dt={key:0,style:{width:"100%","max-width":"70%"}},ct={class:"text-overline on-right"},vt={class:"flex flex-center q-my-xl"},mt=l("div",{class:"ys fade text-center text-bold text-h4 text-weight-light q-ma-xl"}," Recommended Beverages ",-1),pt={class:"q-mx-xl q-mb-xl row justify-evenly"},wt={__name:"DrinksDetails",setup(o){const x=ge(),_=xe(),D=we(),y=me(),{ctx:C}=Z(),S=v([]),h=v(0),c=v(1),q=v(1),w=v(!1),k=v(null),z=v(null),F=v(null),L=_.params.id,a=v(null),g=v([null,null,null,null,null]),X=v(null),G=async s=>{try{const e=await B.get(`/product/${s}`);a.value=e.data,h.value=e.data.rating,X.value=e.data.reviews}catch(e){console.error(e)}},H=async s=>{try{const e=await B.get(`/review/rating/${s}`);Object.keys(e.data).forEach(t=>{g.value[t-1]=e.data[t]})}catch(e){console.error(e)}},ee=async()=>{w.value=!0;const s=c.value+(y.items.find(e=>e.product_id===a.value.id)?y.items.find(e=>e.product_id===a.value.id).quantity:0);try{const e=await B.get(`product/cart/${a.value.id}?quantity=${s}`);e.data.can_add===!0?(y.addItem(a.value.id,c.value),k.value=!0,z.value=!1,c.value=1):(z.value=!0,F.value=e.data.quantity)}catch(e){console.error(e)}setTimeout(()=>{w.value=!1},1e3),setTimeout(()=>{k.value=null},3e3)},te=()=>{c.value>1&&(c.value=parseInt(c.value)-1)},ae=()=>{c.value<25&&(c.value=parseInt(c.value)+1)},se=async()=>{try{const s=await B.get("/product/random/roulette");S.value=s.data}catch(s){console.error(s)}},le=s=>{const e=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(s)).split(",");return`${e[0]}, ${e[1]} @ ${e[2]}`},oe=()=>{const s=C.$refs.reviews;if(s){const t=s.offsetTop-100;window.scrollTo({top:t,behavior:"smooth",passive:!0})}},f=v(null),O=p(()=>{if(f.value===null)return a.value.reviews;const s=a.value.reviews.filter(e=>e.rating===f.value);return s.length===0?a.value.reviews:s}),re=s=>{s===null||a.value.reviews.filter(t=>t.rating===s).length===0?f.value=null:f.value=s},Q=v(!1),J=async()=>{if(x.isAuthenticated.value&&!x.isLoading.value)try{(await B.get(`/review/${_.params.id}/${x.user.value.sub.split("|")[1]}`)).data?Q.value=!0:D.push(`/${_.params.category}/${_.params.id}/review`)}catch(s){console.error(s)}else await x.loginWithRedirect()};qe(f,s=>{re(s)}),ke(async(s,e)=>{s.params.id!==e.params.id&&(V.value=!0,await G(s.params.id),await H(s.params.id),V.value=!1,Q.value=!1,g.value=[null,null,null,null,null])});const V=v(!1);return be(async()=>{V.value=!0,await se(),await G(L),await H(L),V.value=!1}),(s,e)=>(n(),i(A,null,[r(pe),V.value?(n(),i("div",Qe,[r(ne,{color:"deep-purple-14 q-pb-xl",size:"20rem"})])):(n(),i("div",Ve,[l("div",Re,[l("div",Ie,[r(R,{name:"keyboard_arrow_left",size:"30px"}),l("div",{class:"text-h6 underline ys",onClick:e[0]||(e[0]=t=>b(D).back())},"Back")]),a.value?(n(),i("div",Te,[l("img",{src:`static/products/${a.value.image}`,style:{width:"100%","max-width":"800px",height:"100%"},alt:""},null,8,Be),a.value?(n(),i("div",De,[l("div",Fe,u(a.value.category_name[0].toUpperCase()+a.value.category_name.substring(1)),1),l("div",Le,[$(u(a.value.name)+" ",1),l("span",Oe,"by "+u(a.value.brand),1)]),l("div",{class:"cursor-pointer row items-center oswald q-py-md",onClick:oe},[l("div",Pe,u(h.value.toFixed(1)),1),r(N,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=t=>h.value=t),max:"5",size:"sm",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue"]),l("div",Ue,u(a.value.reviews.length)+" rating"+u(a.value.reviews.length===1?"":"s"),1)]),a.value.reviews.length===0?(n(),i("div",{key:0,class:"text-deep-purple-14 cursor-pointer",onClick:e[2]||(e[2]=t=>J())}," Be the first to review! ")):d("",!0),r(E,{class:"q-my-md"}),l("div",je,"$ "+u(a.value.price.toFixed(2)),1),l("div",Ae,u(a.value.description),1),l("div",Ee,[r(R,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[3]||(e[3]=t=>te())}),r(ye,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"5rem"},modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t),mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),r(R,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[5]||(e[5]=t=>ae())}),r(K,{class:"q-ml-xl oswald",style:{width:"80%"},color:a.value.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:a.value.quantity===0||b(y).items.some(t=>t.product_id===a.value.id&&t.quantity===25),onClick:e[6]||(e[6]=t=>ee())},{default:m(()=>[a.value.quantity===0?(n(),i("div",Ne,"OUT OF STOCK")):b(y).items.some(t=>t.product_id===a.value.id&&t.quantity===25)?(n(),i("div",Me," MAX LIMIT REACHED ")):a.value.quantity!==0&&!w.value?(n(),i("div",Xe,[$(" ADD TO CART "),a.value.quantity!==0?(n(),T(R,{key:0,name:"mdi-cart-outline on-right"})):d("",!0)])):w.value?(n(),i("div",Ge,[r(_e,{color:"white",size:"1em",thickness:8})])):d("",!0)]),_:1},8,["color","disable"])]),l("div",He,[r(j,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:m(()=>[z.value?(n(),i("div",Je," Cannot add to cart. Only "+u(F.value)+" left in stock! ",1)):d("",!0)]),_:1}),b(y).items.find(t=>t.product_id===a.value.id)?(n(),i("div",Ke,[l("div",We,[b(y).items.find(t=>t.product_id===a.value.id).quantity+c.value<=25?(n(),i("div",Ye,[r(j,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:m(()=>[k.value?(n(),i("div",Ze,u(a.value.name)+" successfully added to cart! ",1)):d("",!0)]),_:1}),r(j,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:m(()=>[k.value==!1?(n(),i("div",et," Something went wrong adding item to cart! ")):d("",!0)]),_:1})])):d("",!0),r(j,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:m(()=>[b(y).items.find(t=>t.product_id===a.value.id).quantity===25?(n(),i("div",tt," Quantity exceeds limit ")):d("",!0)]),_:1})])])):d("",!0)])])):d("",!0)])):d("",!0)]),r(E,{class:"q-my-xl",inset:""}),l("div",at,[l("div",{class:"q-ma-xl",ref_key:"reviews",ref:X},[st,l("div",lt,[r(N,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=t=>h.value=t),max:"5",size:"md",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue"]),l("div",ot,u(h.value.toFixed(1))+" out of 5 ",1)]),a.value?(n(),i("div",rt,u(a.value.reviews.length)+" customer "+u(a.value.reviews.length===1?" rating":"ratings"),1)):d("",!0),(n(),i(A,null,M(5,t=>l("div",{key:t,class:"q-ml-sm"},[l("div",{class:"row items-center progress-bar",onClick:P=>f.value=t},[l("div",it,u(t)+" star ",1),r(ze,{size:"20px",style:{width:"200px"},value:g.value[t-1]?parseFloat((g.value[t-1].percentage/100).toFixed(2)):0,color:"deep-purple-14",class:"q-my-sm cursor-pointer"},null,8,["value"]),l("div",ut,u(g.value[t-1]?g.value[t-1].percentage.toFixed(1):0)+" % ",1)],8,nt)])),64)),l("div",{class:"text-center progress-bar cursor-pointer oswald text-body1",onClick:e[8]||(e[8]=t=>f.value=null)}," All Reviews "),r(K,{class:"q-mt-md full-width",label:Q.value?"Already left review":"Leave a review",color:"deep-purple-14",push:"",rounded:"",disable:Q.value,onClick:e[9]||(e[9]=t=>J())},{default:m(()=>[Q.value?d("",!0):(n(),T(R,{key:0,class:"on-right",name:"chat"}))]),_:1},8,["label","disable"])],512),a.value&&O.value.length>0?(n(),i("div",dt,[r(W,{class:"q-px-md q-py-md"},{default:m(()=>[r(I,{class:"ys text-h6"},{default:m(()=>[$(u(f.value?f.value.toFixed(1)+" Star Rated Reviews":"All customer reviews"),1)]),_:1}),(n(!0),i(A,null,M(O.value.slice((q.value-1)*5,q.value*5),t=>(n(),T(W,{key:t,bordered:""},{default:m(()=>[r(I,{class:"ys text-bold q-pb-none"},{default:m(()=>[$(u(t.title),1)]),_:2},1024),r(I,{class:"q-pt-none oswald"},{default:m(()=>[r(N,{modelValue:t.rating,"onUpdate:modelValue":P=>t.rating=P,max:"5",size:"xs",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half",readonly:""},null,8,["modelValue","onUpdate:modelValue"]),l("span",ct,u(t.rating.toFixed(1)),1)]),_:2},1024),r(I,{class:"oswald"},{default:m(()=>[$(u(t.comment),1)]),_:2},1024),r(I,{class:"text-grey oswald"},{default:m(()=>[$(u(le(t.created_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l("div",vt,[O.value.length>5?(n(),T($e,{key:0,modelValue:q.value,"onUpdate:modelValue":e[10]||(e[10]=t=>q.value=t),max:Math.ceil(O.value.length/5),"max-pages":5,"boundary-numbers":"",color:"deep-purple-14","active-design":"push","active-color":"deep-purple-14","direction-links":""},null,8,["modelValue","max"])):d("",!0)])])):d("",!0)]),r(E,{class:"q-my-xl",inset:""}),mt,l("div",pt,[(n(!0),i(A,null,M(S.value,(t,P)=>(n(),T(Ce,{class:"fade",key:P,product:t},null,8,["product"]))),128))])])),r(fe)],64))}};export{wt as default};
