import{n as T,i as L,o as m,k as b,p as S,Q as j,q as V,r as E}from"./FooterComponent.a78091ec.js";import{a8 as _,r as f,j as A,t as o,D as C,y as i,x as y,v as s,a6 as g,T as I,E as r,L as v,u,z as B,C as D}from"./index.4e430b80.js";const M=["src"],N=y("div",{class:"text-caption row justify-end"},"Max limit 25",-1),F={class:"text-warning animated zoomIn"},P={key:0,class:"row justify-end"},R={key:0},U={key:0,class:"text-positive animated zoomIn"},H={key:0,class:"text-negative animated zoomIn slow"},K={key:0,class:"text-amber-8"},X={key:0},G={key:1},J={key:2},W={key:3},tt={__name:"ProductCard",props:{product:{type:Object,required:!0}},setup(a){const d=T(),h=_(),p=a,n=f(1),k=f(!1),x=f(null),w=f(null),z=f(null),q=()=>{const l=p.product.category_name.toLowerCase().split(" ").join("-");h.push(`/${l}/${p.product.id}`)},$=async l=>{l&&l.stopPropagation&&l.stopPropagation(),k.value=!0;const e=n.value+(d.items.find(t=>t.product_id===p.product.id)?d.items.find(t=>t.product_id===p.product.id).quantity:0);try{const t=await D.get(`product/cart/${p.product.id}?quantity=${e}`);t.data.can_add===!0?(d.addItem(p.product.id,n.value),x.value=!0,w.value=!1,n.value=1):(w.value=!0,z.value=t.data.quantity)}catch(t){console.error(t)}setTimeout(()=>{k.value=!1},1e3),setTimeout(()=>{x.value=null},3e3)},Q=()=>{n.value>1&&(n.value=parseInt(n.value)-1)},O=()=>{n.value<25&&(n.value=parseInt(n.value)+1)};return A(()=>{const l=document.querySelectorAll(".slide"),e=new IntersectionObserver(t=>{t.forEach(c=>{c.target.classList.toggle("animated",c.isIntersecting),c.target.classList.toggle("slideInLeft",c.isIntersecting),c.target.classList.toggle("slower",c.isIntersecting),c.isIntersecting&&e.unobserve(c.target)})});l.forEach(t=>{e.observe(t)})}),(l,e)=>(o(),C(E,{class:"slide q-my-lg oswald",style:{width:"100%","max-width":"400px"}},{default:i(()=>[y("img",{class:"cursor-pointer",src:`static/products/${a.product.image}`,onClick:e[0]||(e[0]=t=>q())},null,8,M),s(L,{class:"q-mt-md bg-deep-purple-14",style:{"padding-top":"1px","padding-bottom":"1px"}}),s(m,{class:"q-pb-none",onClick:e[2]||(e[2]=t=>q())},{default:i(()=>[y("span",{class:"text-h6 cursor-pointer",onClick:e[1]||(e[1]=t=>q())},g(a.product.name),1)]),_:1}),s(m,{class:"q-pb-none"},{default:i(()=>[y("div",null,g(a.product.description.slice(0,250))+"...",1)]),_:1}),s(m,{class:"q-pb-none row justify-end items-center"},{default:i(()=>[s(b,{class:"cursor-pointer on-left",name:"remove",size:"20px",onClick:e[3]||(e[3]=t=>Q())}),s(S,{class:"rounded-borders","input-class":"ys text-bold text-h6 text-center",style:{width:"2.5rem"},modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value=t),modelModifiers:{trim:!0},mask:"##",dense:"",borderless:"","unmasked-value":"",readonly:""},null,8,["modelValue"]),s(b,{class:"cursor-pointer on-right",name:"add",size:"20px",onClick:e[5]||(e[5]=t=>O())})]),_:1}),s(m,{class:"q-pt-none"},{default:i(()=>[N]),_:1}),w.value?(o(),C(m,{key:0},{default:i(()=>[s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[y("div",F," Cannot add to cart. Only "+g(z.value)+" left in stock! ",1)]),_:1})]),_:1})):r("",!0),v(d).items.find(t=>t.product_id===a.product.id)?(o(),C(m,{key:1,class:"q-py-none"},{default:i(()=>[v(d).items.find(t=>t.product_id===a.product.id)?(o(),u("div",P,[v(d).items.find(t=>t.product_id===a.product.id).quantity+n.value<=25?(o(),u("div",R,[s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[x.value?(o(),u("div",U,g(a.product.name)+" successfully added to cart! ",1)):r("",!0)]),_:1}),s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[x.value==!1?(o(),u("div",H," Something went wrong adding item to cart! ")):r("",!0)]),_:1})])):r("",!0),s(I,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:i(()=>[v(d).items.find(t=>t.product_id===a.product.id).quantity===25?(o(),u("div",K," Quantity exceeds limit ")):r("",!0)]),_:1})])):r("",!0)]),_:1})):r("",!0),s(m,{class:"row justify-between items-center"},{default:i(()=>[y("div",{class:"ys text-h6 cursor-pointer",onClick:e[6]||(e[6]=t=>q())}," $ "+g(a.product.price.toFixed(2)),1),s(j,{color:a.product.quantity===0?"negative":"deep-purple-14",rounded:"",push:"",disable:a.product.quantity===0||v(d).items.some(t=>t.product_id===a.product.id&&t.quantity===25),onClick:e[7]||(e[7]=t=>$())},{default:i(()=>[a.product.quantity===0?(o(),u("div",X,"OUT OF STOCK")):v(d).items.some(t=>t.product_id===a.product.id&&t.quantity===25)?(o(),u("div",G," MAX LIMIT REACHED ")):a.product.quantity!==0&&!k.value?(o(),u("div",J,[B(" ADD TO CART "),a.product.quantity!==0?(o(),C(b,{key:0,name:"mdi-cart-outline on-right"})):r("",!0)])):k.value?(o(),u("div",W,[s(V,{color:"white",size:"1em",thickness:8})])):r("",!0)]),_:1},8,["color","disable"])]),_:1})]),_:1}))}};export{tt as _};
