import{Q as R}from"./QImg-D0NjUkff.js";import{_ as $,f as p,m as x,n as C,Q as I,j as B}from"./FooterComponent-CRpr9cR5.js";import{Q as S}from"./QRating-Cf5qxSFT.js";import{Q as A,I as M,O as N,r as l,h as O,k as T,u as i,v as r,y as a,x as t,D as y,L as f,A as U,F as W,G as w}from"./index-BMfJQZfm.js";const z={class:"main"},D={class:"q-mx-auto q-my-lg",style:{width:"60%"}},F=a("div",{class:"ys text-h4 q-mb-lg"},"Create Review",-1),L={key:0},j={class:"flex items-center"},E={class:"text-h5 oswald text"},G=a("div",{class:"text-h5 ys q-mb-md"},"Overall Rating",-1),P=a("div",{class:"text-h6 ys q-mb-md"},"Add a headline or title",-1),H=a("div",{class:"text-h6 ys q-mb-md"},"Add a written review",-1),J={class:"q-mb-xl",align:"right"},K={key:0},X={key:1},Y={key:0,class:"text-positive text-body1 q-mt-md oswald"},Z={key:1,class:"text-negative text-body1 q-mt-md oswald"},oe={__name:"CreateReview",setup(ee){const b=A(),h=M(),k=N(),c=l(!1),g=l(!1),_=l(!1),u=l(null),n=l(null),q=O(()=>v.value===0||u.value===null||!u.value||n.value===null||!n.value),m=l(null),V=async()=>{c.value=!0,_.value=!1,m.value=null;try{const s={title:u.value,rating:v.value,comment:n.value},e=await w.post(`/review/${o.value.id}/${b.user.value.sub.split("|")[1]}`,s);e.status===200?(g.value=!0,setTimeout(()=>{c.value=!1},1e3),setTimeout(()=>{k.push(`/${h.params.category}/${h.params.id}`)},3e3)):e.status===202&&(_.value=!0,m.value=e.data.detail)}catch(s){console.error(s)}setTimeout(()=>{c.value=!1},1e3)},o=l(null),v=l(0),Q=async()=>{try{const s=await w.get(`/product/${h.params.id}`);o.value=s.data}catch(s){console.error(s)}};return T(async()=>{await Q()}),(s,e)=>(r(),i(W,null,[a("div",z,[t($),a("div",D,[F,o.value?(r(),i("div",L,[a("div",j,[t(R,{class:"rounded-borders q-mr-lg",src:`static/products/${o.value.image}`,alt:o.value.name+"Image",style:{width:"150px",height:"150px"},ratio:1},null,8,["src","alt"]),a("div",E,f(o.value.name),1)]),t(p,{class:"q-my-md"}),G,t(S,{modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=d=>v.value=d),max:"5",size:"xl",color:"deep-purple-14",icon:"star_border","icon-selected":"star","icon-half":"star_half"},null,8,["modelValue"]),t(p,{class:"q-my-md"}),P,t(x,{standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=d=>u.value=d),modelModifiers:{trim:!0},placeholder:"What's most import to know?",autogrow:""},null,8,["modelValue"]),t(p,{class:"q-my-md"}),H,t(x,{standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=d=>n.value=d),modelModifiers:{trim:!0},placeholder:"What did you like or dislike? What did you use this product for?",type:"textarea",height:"200px"},null,8,["modelValue"]),t(p,{class:"q-my-md"}),a("div",J,[t(I,{color:"deep-purple-14",disable:q.value,push:"",onClick:e[3]||(e[3]=d=>V())},{default:U(()=>[c.value?(r(),i("div",X,[t(C,{color:"white",size:"1em",thickness:8})])):(r(),i("div",K,"Submit"))]),_:1},8,["disable"]),g.value?(r(),i("div",Y," Created Review! Redirecting back to product page... ")):y("",!0),_.value&&m.value?(r(),i("div",Z,f(m.value)+"! ",1)):y("",!0)])])):y("",!0)])]),t(B)],64))}};export{oe as default};
