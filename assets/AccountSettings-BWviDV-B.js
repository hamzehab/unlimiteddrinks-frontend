import{x as de,_ as ne,i as _,f as L,l as m,m as c,o as B,Q as f,y as X,z as G,A as O,C as W,B as re,D as ie,E as me,F as ce,j as ve}from"./FooterComponent-CRpr9cR5.js";import{Q as pe,r as u,h as R,u as Z,v,x as l,y as a,L as d,M as j,A as o,P as fe,C as g,D as w,T as ye,S as N,B as h,U as H,F as be,G as U}from"./index-BMfJQZfm.js";const xe={class:"main"},_e={class:"q-mx-auto q-my-xl",style:{width:"70%"}},ge={class:"ys text-h4 row items-center"},we={class:"on-right"},he=a("div",null,"Your Account",-1),Ve={class:"text-body1 on-right"},ke={class:"text-caption on-right"},Ae=a("div",{class:"ys text-h6 q-mb-sm"},"Email",-1),qe=a("div",{class:"row justify-end text-grey-6 text-body2"}," Email cannot be edited ",-1),Se={class:"oswald",style:{width:"100%","max-width":"60%"}},Ce={class:"row ys q-mb-md"},$e=a("div",{class:"text-h6 on-left"},"Name",-1),Ne={class:"oswald underline row items-center text-deep-purple-14 text-body2"},Ue=a("div",{class:"q-mb-sm row items-center"},[a("div",{class:"ys text-h6 on-left"},"Addresses")],-1),Me={class:"row justify-between"},ze={class:"text-bold text-body2"},Qe={class:"text-caption"},Te={class:"text-bold text-body1"},Be={class:"text-body2"},je={class:"text-center"},Ee=a("div",null,"Add Address",-1),Ie={class:"row justify-between"},De={class:"text-dark"},Fe={class:"row justify-end q-mt-xl"},Ye=a("div",null,"By deleting your account:",-1),Pe={class:"q-ml-md"},Oe={__name:"AccountSettings",setup(Le){const n=de(),V=pe(),y=u(!1),E=u(!1),M=u(!1),r=u(null),b=u(null),p=u(null),I=n.customer.email,z=u(n.customer.firstName),Q=u(n.customer.lastName),k=u(""),A=u(""),q=u(""),S=u(""),C=u(""),$=u(""),x=u(""),J=R(()=>!(k.value&&A.value&&q.value&&C.value&&$.value&&(x.value===null?x.value:x.value.length===5))),K=R(()=>!(z.value&&Q.value)),i=u(null),ee=async()=>{const s={first_name:z.value,last_name:Q.value};try{const e=await U.post(`/customer/editName/${V.user.value.sub.split("|")[1]}`,s);e.status===204?(r.value=!0,b.value="No changes were made since there were no edits made!"):e.status===200?(r.value=!1,b.value="Name changed successfully",n.updateName(e.data.first_name,e.data.last_name),setTimeout(()=>{r.value=null,b.value=null},2e3),y.value=!1):(r.value=!0,b.value="Something went wrong!")}catch(e){r.value=!0,b.value="Something went wrong!",console.error(e)}},D=u(!1),F=async()=>{try{(await U.delete(`customer/delete/${V.user.value.sub.split("|")[1]}`)).data?(await V.logout({logoutParams:{returnTo:"https://hamzehab.github.io/unlimiteddrinks-frontend"}}),sessionStorage.clear()):(D.value=!0,setTimeout(()=>{F.value=!1},2e3))}catch(s){D.value=!0,setTimeout(()=>{F.value=!1},2e3),console.error(s)}},T=u(sessionStorage.getItem("customer")?[n.getSelectedAddress,...n.getAddresses]:[]),te=R(()=>T.value.map(s=>({id:s.id,label:{first_name:s.first_name,last_name:s.last_name},value:{street:s.street,apt:s.street2?s.street2:null,city:s.city,state:s.state,zip_code:s.zip_code}}))),Y=u(!1),le=async s=>{i.value=s,k.value=s.label.first_name,A.value=s.label.last_name,q.value=s.value.street,S.value=s.value.apt,C.value=s.value.city,$.value=s.value.state,x.value=s.value.zip_code;try{(await U.get(`/address/isMain/${V.user.value.sub.split("|")[1]}/${s.id}`)).data?Y.value=!0:Y.value=!1}catch(e){console.error(e)}},ae=s=>{T.value.push(s),M.value=!1},se=async()=>{const s={first_name:k.value,last_name:A.value,street:q.value,street2:S.value!==""?S.value:void 0,city:C.value,state:$.value,zip_code:x.value};try{const e=await U.post(`/address/update/${V.user.value.sub.split("|")[1]}/${i.value.id}`,s);e.status===200?(r.value=!1,p.value="Address Updated!",n.updateAddress(e.data),T.value=[n.getSelectedAddress,...n.getAddresses],i.value=null,setTimeout(()=>{r.value=null,p.value=null},2e3)):e.status===204?(r.value=!0,p.value="Address not updated were made since there were no changes!"):(r.value=!0,p.value="Something went wrong!")}catch(e){r.value=!0,p.value="Something went wrong!",console.error(e)}},P=u(!1),oe=async()=>{try{(await U.delete(`/address/delete/${V.user.value.sub.split("|")[1]}/${i.value.id}`)).data?(n.deleteAddress(i.value),T.value=[n.getSelectedAddress,...n.getAddresses],i.value=null):(P.value=!0,setTimeout(()=>{P.value=!1},1e3))}catch(s){console.error(s)}},ue=re;return(s,e)=>(v(),Z(be,null,[l(ne),a("div",xe,[a("div",_e,[a("div",ge,[l(_,{name:"mdi-account-circle-outline",size:"50px"}),a("div",we,[he,a("div",Ve," Welcome, "+d(j(n).getFullName),1),a("div",ke," Member Since: "+d(j(n).customer.memberSince),1)])]),l(L,{class:"q-mt-lg q-mb-xl"}),l(B,{class:"q-pa-md"},{default:o(()=>[l(m,{class:"oswald",style:{width:"100%","max-width":"60%"}},{default:o(()=>[Ae,l(c,{class:"q-mb-sm",label:"Email Address",modelValue:j(I),"onUpdate:modelValue":e[0]||(e[0]=t=>fe(I)?I.value=t:null),modelModifiers:{trim:!0},standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",disable:""},null,8,["modelValue"]),qe]),_:1})]),_:1}),l(L,{class:"q-my-xl"}),l(B,{class:"q-pa-lg"},{default:o(()=>[l(m,{class:"row justify-between"},{default:o(()=>[a("div",Se,[a("div",Ce,[$e,a("div",Ne,[y.value?w("",!0):(v(),Z("div",{key:0,class:"cursor-pointer",onClick:e[1]||(e[1]=t=>y.value=!0)}," Edit Name "))])]),l(ye,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"},{default:o(()=>[b.value?(v(),g(m,{key:0,class:N(["q-pa-none q-pb-md",r.value?"text-red":"text-green"])},{default:o(()=>[h(d(b.value),1)]),_:1},8,["class"])):w("",!0)]),_:1}),l(c,{class:"q-mb-lg",label:"First Name",standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:z.value,"onUpdate:modelValue":e[2]||(e[2]=t=>z.value=t),modelModifiers:{trim:!0},disable:!y.value},null,8,["modelValue","disable"]),l(c,{label:"Last Name",standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:Q.value,"onUpdate:modelValue":e[3]||(e[3]=t=>Q.value=t),modelModifiers:{trim:!0},disable:!y.value},null,8,["modelValue","disable"])])]),_:1}),y.value?(v(),g(m,{key:0,class:"row justify-center oswald"},{default:o(()=>[l(f,{class:"q-mt-lg on-left",label:"Cancel",color:"dark",flat:"",onClick:e[4]||(e[4]=t=>y.value=!1)}),l(f,{class:"q-mt-lg on-right",label:"Confirm Changes",color:"deep-purple-14",push:"",disable:K.value,onClick:e[5]||(e[5]=t=>ee())},null,8,["disable"])]),_:1})):w("",!0)]),_:1}),l(L,{class:"q-my-xl"}),l(B,{class:"q-pa-md"},{default:o(()=>[l(m,{class:"oswald"},{default:o(()=>[Ue,a("div",Me,[l(X,{ref:"addressSelect",outlined:"",modelValue:i.value,"onUpdate:modelValue":e[6]||(e[6]=t=>i.value=t),modelModifiers:{trim:!0},options:te.value,label:"Select Address",style:{width:"60%"}},{option:o(t=>[H((v(),g(G,{clickable:"",onClick:Re=>le(t.opt)},{default:o(()=>[l(O,null,{default:o(()=>[a("div",ze,d(t.opt.label.first_name)+" "+d(t.opt.label.last_name),1),a("span",Qe,d(t.opt.value.street)+d(t.opt.value.apt?" "+t.opt.value.apt:"")+", "+d(t.opt.value.city)+" "+d(t.opt.value.state)+" "+d(t.opt.value.zip_code),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[W]])]),"selected-item":o(t=>[l(G,{class:"q-pa-none"},{default:o(()=>[l(O,null,{default:o(()=>[a("div",Te,d(t.opt.label.first_name)+" "+d(t.opt.label.last_name),1),a("span",Be,d(t.opt.value.street)+d(t.opt.value.apt?" "+t.opt.value.apt:"")+", "+d(t.opt.value.city)+" "+d(t.opt.value.state)+" "+d(t.opt.value.zip_code),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","options"]),l(f,{flat:"",color:"deep-purple-14",onClick:e[7]||(e[7]=t=>M.value=!0)},{default:o(()=>[a("div",je,[l(_,{name:"add",size:"30px"}),Ee])]),_:1})]),i.value?(v(),g(m,{key:0,class:"q-pa-none q-pt-lg"},{default:o(()=>[l(c,{class:"q-my-md",label:"First Name",modelValue:k.value,"onUpdate:modelValue":e[8]||(e[8]=t=>k.value=t),modelModifiers:{trim:!0},standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark"},null,8,["modelValue"]),l(c,{label:"Last Name",modelValue:A.value,"onUpdate:modelValue":e[9]||(e[9]=t=>A.value=t),modelModifiers:{trim:!0},standout:"bg-grey-3 text-deep-purple-14 ","input-class":"text-dark"},null,8,["modelValue"]),l(c,{class:"q-my-md",label:"Street Address",modelValue:q.value,"onUpdate:modelValue":e[10]||(e[10]=t=>q.value=t),modelModifiers:{trim:!0},standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark"},null,8,["modelValue"]),l(c,{label:"Apt, suite, unit, building, floor, etc.",standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:S.value,"onUpdate:modelValue":e[11]||(e[11]=t=>S.value=t),modelModifiers:{trim:!0}},null,8,["modelValue"]),l(c,{class:"q-my-md",label:"City",standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",modelValue:C.value,"onUpdate:modelValue":e[12]||(e[12]=t=>C.value=t),modelModifiers:{trim:!0}},null,8,["modelValue"]),a("div",Ie,[l(X,{standout:"bg-grey-3 text-deep-purple-14",style:{width:"100%","max-width":"49%"},label:"State","emit-value":"","map-options":"","options-dense":"",modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=t=>$.value=t),options:j(ue)},{"selected-item":o(t=>[a("span",De,d(t.opt.label),1)]),_:1},8,["modelValue","options"]),l(c,{label:"ZIP Code",modelValue:x.value,"onUpdate:modelValue":e[14]||(e[14]=t=>x.value=t),modelModifiers:{trim:!0},standout:"bg-grey-3 text-deep-purple-14","input-class":"text-dark",mask:"#####",style:{width:"100%","max-width":"49%"}},null,8,["modelValue"])])]),_:1})):w("",!0)]),_:1}),i.value&&!Y.value?(v(),g(m,{key:0,class:"q-pb-none flex flex-center"},{default:o(()=>[l(f,{class:N(P.value?"animated shakeX slower":""),label:"Remove from account",flat:"",color:"red",onClick:e[15]||(e[15]=t=>oe())},null,8,["class"])]),_:1})):w("",!0),i.value?(v(),g(m,{key:1,class:"flex flex-center oswald"},{default:o(()=>[a("div",{class:"text-center text-body1 cursor-pointer underline",style:{width:"200px"},onClick:e[16]||(e[16]=t=>(i.value=null,p.value=null))}," Cancel "),l(f,{label:"Save Changes",color:"deep-purple-14",style:{width:"200px"},push:"",disable:J.value,onClick:e[17]||(e[17]=t=>se())},null,8,["disable"])]),_:1})):w("",!0),p.value?(v(),g(m,{key:2,class:N(r.value?"q-pb-none":"q-py-none")},{default:o(()=>[a("div",{class:N(["text-body2 oswald",r.value?"text-red text-center":"text-green"])},d(p.value),3)]),_:1},8,["class"])):w("",!0)]),_:1}),a("div",Fe,[l(f,{class:"q-pa-md",flat:"",label:"Delete Account",color:"negative",onClick:e[18]||(e[18]=t=>E.value=!0)})])]),l(me,{modelValue:E.value,"onUpdate:modelValue":e[20]||(e[20]=t=>E.value=t)},{default:o(()=>[l(B,{style:{width:"100%","max-width":"700px"}},{default:o(()=>[l(m,{class:"text-h6 ys bg-deep-purple-14 text-white"},{default:o(()=>[h(" Are you sure you want to permanently delete your account? ")]),_:1}),l(m,{class:"oswald text-body1 q-mx-xl"},{default:o(()=>[Ye,a("div",Pe,[a("div",null,[l(_,{name:"remove"}),h(" You will lose access to your order history and any saved cart items. ")]),a("div",null,[l(_,{name:"remove"}),h(" Any active subscriptions or membership benefits will be canceled. ")]),a("div",null,[l(_,{name:"remove"}),h(" You will lose access to your order history and any saved cart items. ")]),a("div",null,[l(_,{name:"remove"}),h(" You won't be able to track the status of current or future orders. ")]),a("div",null,[l(_,{name:"remove"}),h(" Your personal information will be permanently removed from our system and will not be used for future transactions. ")])])]),_:1}),l(ie,{class:"q-pb-md",align:"right"},{default:o(()=>[H(l(f,{label:"cancel",push:"",color:"dark",style:{width:"100%","max-width":"150px"}},null,512),[[W]]),l(f,{class:N(D.value?"animated shakeX slower":""),label:"delete",style:{width:"100%","max-width":"150px"},flat:"",color:"negative",onClick:e[19]||(e[19]=t=>F())},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ce,{modelValue:M.value,"onUpdate:modelValue":e[21]||(e[21]=t=>M.value=t),onAddAddress:ae},null,8,["modelValue"])]),l(ve)],64))}};export{Oe as default};
